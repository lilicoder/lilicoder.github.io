---
title: 递归范例
date: 2020-10-22 10:12:31
---

## 点击找出 name 匹配层级

点击某地区，返回子级

   <div style="display:flex">
      <div style="flex:1;margin-right:20px">{% asset_img showLocale.png showLocale %}</div>
       <div style="flex:1">{% asset_img showLocale2.png showLocale2 %}</div>
   </div>
- 返回匹配 name 的 chindrenList
  例如如下结构

```
[{"id":"5bf4176614f745e9808d738341cc0fd7","code":"1000202001","name":"机械原因","level_code":"0003","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"lasmjfasdf","level":2,"children":[],"parent_id":"5bf4176614f745e9808d738341cc0fd7","org_id":"","hasChildren":false,"name":"adfsasf","level_code":"00030003","tenantId":"teh6ntw4","id":"3f21c81f87a44bc49ce990622fc5e062"},{"code":"asdfasdads","level":2,"children":[{"code":"Test1637","level":3,"children":[{"code":"Test1017","level":4,"children":[],"parent_id":"cf3c0440609e49b4a1e6124ad2668853","org_id":"","hasChildren":false,"name":"Test1017","level_code":"0003000400010001","tenantId":"teh6ntw4","id":"d54bdfdae1804eca89c5788e063b869b"},{"code":"Test1018","level":4,"children":[],"parent_id":"cf3c0440609e49b4a1e6124ad2668853","org_id":"","hasChildren":false,"name":"Test1018","level_code":"0003000400010002","tenantId":"teh6ntw4","id":"99dae79245044542bb1666731a86f459"}],"parent_id":"17b41c48440b4ba18c12e07dfbef1c3e","org_id":"","hasChildren":true,"name":"Test1637","level_code":"000300040001","tenantId":"teh6ntw4","id":"cf3c0440609e49b4a1e6124ad2668853"}],"parent_id":"5bf4176614f745e9808d738341cc0fd7","org_id":"","hasChildren":true,"name":"asdfasdfasdf","level_code":"00030004","tenantId":"teh6ntw4","id":"17b41c48440b4ba18c12e07dfbef1c3e"},{"code":"asdfasdads11","level":2,"children":[{"code":"Test1658","level":3,"children":[],"parent_id":"c33733e748c74c668dfcf42c8f56423c","org_id":"","hasChildren":false,"name":"Test1658","level_code":"000300050001","tenantId":"teh6ntw4","id":"82788b97d27b45d58dc53fbae4755709"}],"parent_id":"5bf4176614f745e9808d738341cc0fd7","org_id":"","hasChildren":true,"name":"asdfasdfasdf111","level_code":"00030005","tenantId":"teh6ntw4","id":"c33733e748c74c668dfcf42c8f56423c"},{"code":"0616","level":2,"children":[],"parent_id":"5bf4176614f745e9808d738341cc0fd7","org_id":"","hasChildren":false,"name":"测试0616","level_code":"00030006","tenantId":"teh6ntw4","id":"ff61dc7f1e574914be52979c4c4ba149"},{"code":"Test1438","level":2,"children":[],"parent_id":"5bf4176614f745e9808d738341cc0fd7","org_id":"","hasChildren":false,"name":"Test1438","level_code":"00030008","tenantId":"teh6ntw4","id":"24e5d36dd5a04e3b92490acd09b0d407"}],"hasChildren":true},{"id":"6b05342b4833440d8560156406402fb8","code":"005","name":"003","level_code":"0007","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"0011006","level":2,"children":[{"code":"test0011006","level":3,"children":[{"code":"5454546","level":4,"children":[],"parent_id":"f9387be1e9a949efbc76eb28b488d493","org_id":"","hasChildren":false,"name":"sdfhfsh ","level_code":"0007000100010001","tenantId":"teh6ntw4","id":"6181fd5e34f24c68bb9113355fa6f7c8"},{"code":"20200518001","level":4,"children":[],"parent_id":"f9387be1e9a949efbc76eb28b488d493","org_id":"","hasChildren":false,"name":"20200518001","level_code":"0007000100010002","tenantId":"teh6ntw4","id":"7650952e0db8419c9bc7eca389e9ebeb"}],"parent_id":"a3fce25d85364169a752dc9945d69dff","org_id":"","hasChildren":true,"name":"test0011006","level_code":"000700010001","tenantId":"teh6ntw4","id":"f9387be1e9a949efbc76eb28b488d493"},{"code":"045001","level":3,"children":[],"parent_id":"a3fce25d85364169a752dc9945d69dff","org_id":"","hasChildren":false,"name":"045001","level_code":"000700010002","tenantId":"teh6ntw4","id":"6a6f6709e6d744b6970add70784d1b0b"}],"parent_id":"6b05342b4833440d8560156406402fb8","org_id":"","hasChildren":true,"name":"test0011006","level_code":"00070001","tenantId":"teh6ntw4","id":"a3fce25d85364169a752dc9945d69dff"}],"hasChildren":true},{"id":"433738f55f1f43f3b816191ff547b30c","code":"007","name":"005","level_code":"0009","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"045","level":2,"children":[],"parent_id":"433738f55f1f43f3b816191ff547b30c","org_id":"","hasChildren":false,"name":"045","level_code":"00090001","tenantId":"teh6ntw4","id":"cdd47d4b0ae54e67a162e16fa535981b"}],"hasChildren":true},{"id":"98e3b7f8912d4fe89e9e4af146b919d6","code":"014","name":"012","level_code":"0016","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[],"hasChildren":false},{"id":"d24657a068344874bec23c6256c1adef","code":"015","name":"013","level_code":"0017","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"001","level":2,"children":[],"parent_id":"d24657a068344874bec23c6256c1adef","org_id":"","hasChildren":false,"name":"系统故障","level_code":"00170001","tenantId":"teh6ntw4","id":"6777587617654956a3c6f6a7b4236637"}],"hasChildren":true},{"id":"ab15076705e149f0b1472198ba4fbc14","code":"016","name":"014","level_code":"0018","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[],"hasChildren":false},{"id":"bcbeb097d570446bbbb1d8fb9a979d89","code":"sw01","name":"滤芯","level_code":"0020","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"Test1111","level":2,"children":[{"code":"编码测试0616","level":3,"children":[],"parent_id":"67d3b342351d43ba9d5680d31a413b7e","org_id":"","hasChildren":false,"name":"名称测试0616","level_code":"002000010001","tenantId":"teh6ntw4","id":"4f913b189ab94e259e4782f26d471f3a"}],"parent_id":"bcbeb097d570446bbbb1d8fb9a979d89","org_id":"","hasChildren":true,"name":"Test1111","level_code":"00200001","tenantId":"teh6ntw4","id":"67d3b342351d43ba9d5680d31a413b7e"}],"hasChildren":true},{"id":"1c4b99f5d25946be8dec1316be84896f","code":"009001","name":"009001","level_code":"0034","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[],"hasChildren":false},{"id":"60c1dbec7dee4433ab7cde432ee972c8","code":"lili1","name":"莉莉创建的故障分类","level_code":"0035","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[],"hasChildren":false},{"id":"d429fff2710e49328e26123682674438","code":"0515","name":"Amy测试用","level_code":"0036","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"0515001","level":2,"children":[],"parent_id":"d429fff2710e49328e26123682674438","org_id":"","hasChildren":false,"name":"系统安全故障","level_code":"00360001","tenantId":"teh6ntw4","id":"a10679c4acdf474c8cba23d7d137e737"},{"code":"0515003","level":2,"children":[],"parent_id":"d429fff2710e49328e26123682674438","org_id":"","hasChildren":false,"name":"传感器故障","level_code":"00360003","tenantId":"teh6ntw4","id":"55c1f0dd930f4ca48d12878059006906"},{"code":"0515004","level":2,"children":[],"parent_id":"d429fff2710e49328e26123682674438","org_id":"","hasChildren":false,"name":"机械故障","level_code":"00360004","tenantId":"teh6ntw4","id":"6fd410a5deb1476aa09002069d452f3b"}],"hasChildren":true},{"id":"a38f3073142e44f8a2e022f0fbb80aa2","code":"0519001","name":"0519001","level_code":"0039","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"051900101","level":2,"children":[],"parent_id":"a38f3073142e44f8a2e022f0fbb80aa2","org_id":"","hasChildren":false,"name":"051900101","level_code":"00390001","tenantId":"teh6ntw4","id":"010ff7b16e9e4cbbb22afa53dbd8db88"}],"hasChildren":true},{"id":"9e22d778f91145d5a028cd40a858cc8f","code":"006","name":"004","level_code":"0040","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"123","level":2,"children":[],"parent_id":"9e22d778f91145d5a028cd40a858cc8f","org_id":"","hasChildren":false,"name":"123","level_code":"00400001","tenantId":"teh6ntw4","id":"9c292a9ac7454b3fa44fa6629a0cd3fa"}],"hasChildren":true},{"id":"69c62dfc35de4cb8a0b3189c8e16abe2","code":"外观","name":"外观","level_code":"0041","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"Test1533","level":2,"children":[],"parent_id":"69c62dfc35de4cb8a0b3189c8e16abe2","org_id":"","hasChildren":false,"name":"Test1533","level_code":"00410001","tenantId":"teh6ntw4","id":"84cb3649d90045ec80bc2dee9cd93bb7"}],"hasChildren":true},{"id":"e52f99fd8431446dae34b238d1380b6f","code":"daryl测试编码","name":"daryl测试名称","level_code":"0043","level":1,"parent_id":"","org_id":"","tenantId":"teh6ntw4","children":[{"code":"daryl测试编码1","level":2,"children":[{"code":"df33","level":3,"children":[],"parent_id":"16c1a05640324637a5ae15263826674c","org_id":"","hasChildren":false,"name":"88","level_code":"004300010001","tenantId":"teh6ntw4","id":"0986e7abe1e04d978b6fb74384ffa6de"}],"parent_id":"e52f99fd8431446dae34b238d1380b6f","org_id":"","hasChildren":true,"name":"daryl测试名称1","level_code":"00430001","tenantId":"teh6ntw4","id":"16c1a05640324637a5ae15263826674c"},{"code":"daryl测试编码2","level":2,"children":[],"parent_id":"e52f99fd8431446dae34b238d1380b6f","org_id":"","hasChildren":false,"name":"daryl测试名称2","level_code":"00430002","tenantId":"teh6ntw4","id":"1aee8cd99e924f8dac31987d2c396a90"}],"hasChildren":true}]
```

```
 //寻找与点击name匹配的层级
  getDataSourceShowData(name, data) {
    let result = [];
    for (let i = 0; i < data.length; i++) {
      let item = data[i];
      if (
        item.name === name ||
        (this.props.type == "partsSelect" && name.split("_")[1] === item.code)
      ) {
        result = item[this.props.childList];
        break;//匹配到了则跳出循环
      } else {
        if (
          item[this.props.childList] &&
          item[this.props.childList].length > 0
        ) {
          result = this.getDataSourceShowData(name, item[this.props.childList]);
        }
      }
    }
    return result;
  }

```
